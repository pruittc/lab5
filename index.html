<!DOCTYPE html>
<html lang="en">
<head>
	<title>Watering Holes in Corvallis</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<!--meta data for sharing links on Facebook-->
	<meta property="og:title" content="The major cities in Oregon"/>
	<meta property="og:url" content="http://geoviz.ceoas.oregonstate.edu/storymap/examples/2.4/video.html"/>
	<meta property="og:description" content="This is an example of a storymap."/>
	<meta property="og:image" content="assets/cheersend.jpg"/>

	<!--add required stylesheets-->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
	<!--leaflet css-->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css">

	<!--add favicon for the web page-->
	<link rel="shortcut icon" href="img/beer.ico" type="image/x-icon">


	<!--Fonts-->
	<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">


	<link rel="stylesheet" type="text/css" href="css/storymap.2.4.css">
	<!--add required libraries-->

	<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.js"></script>
	<!--jquery-->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>

	<!--boostrap-->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
	<!--leaflet.ajax for asynchronously adding geojson data-->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/1.3.4/chroma.min.js"></script>

	<!--story map plugin-->
	<script src="js/storymap.2.4.js"></script>
</head>
<body>

<div id="storymap" class="container-fluid">
	<div class="row">
		<div class="col-sm-6 col-md-4 storymap-story">
			<section data-scene="overview" data-background="assets/shot.mp4">
				<div class="fullscreen text-center">

					<h1 class="display-4 d-flex justify-content-center">Watering Holes of Corvallis</h1>


					<small class="d-flex justify-content-center" style="color: rgba(255,255,255,0.95)">This story map
						illustrates the popular bars in Corvallis.
					</small>
				</div>
			</section>
			<section data-scene="clods">
				<h2>Clodfelter's</h2>
				<p>Clodfelter's, also known as Clod's is located on Monroe. It is the perfect location for college
					students to take a break. Many locals and visitors like grabbing beers at this location. It gets
					especially crowded during OSU game days due to the many TVs at this establishment. There are many
					beers on tap, happy hour drink and food options. One of the best nights to go is Wednesday nights
					for "Pint Night". The deal is a $5 pint from a new keg and happy hour food prices. When finished,
					you get to keep the pint glass.</p>
			</section>

			<section data-scene="sanchos">
				<h2>Sancho's</h2>
				<p>Sancho's Mexican Grill is a restaurant by day, and a popular bar by night. It is oriented for college
					students, because it's loud and crowded. You will often have to stand in line outside before entering
					because it is always at capacity. They give out a free tequila shot, on the night of turning 21. Their most
					popular drink is called "The Sancho's Special" which costs $10 and has at least four different alcohols in it.</p>
			</section>

			<section data-scene="impulse">
				<h2>Impulse</h2>
				<p>Impulse is next door to Sancho's and is more popular because it's a dancing club. You will hear the
					popular hip-hop and rap songs that are currently being heard. You will stand in line for a long time,
					and have to pay a cover charge. Once you make it inside, you will have to buy expensive, but generic
					drinks. If you're inside for more than an hour, you will start sweating profusely. During the week,there
					are different themed dance nights like Salsa, Girl's Night, and Wagon Wheel Wednesday.</p>
			</section>

			<section data-scene="harrisons">
				<h2>Harrison's</h2>
				<p>Harrison's is a dive bar that is in the direction of downtown. This is a spot that many locals like to
					go. There is always someone singing terribly at karaoke. There are a few pool tables to use. The
					ambiance is very relaxed. During the weekends, older college kids like to go to this dive bar. The
					best thing about this place is that it's across the street from Riva's, which has deliciously authentic Mexican food.</p>
			</section>
			<section data-scene="peacock">
				<h2>The Peacock</h2>
				<p>The Peacock is a popular dive bar in the heart of downtown Corvallis. There are often drink specials, karaoke,
					and fun times to be had here. There are a few pool tables and shuffleboard to use. Their most popular
					nights are Western Wednesdays because they make cheap, but strong Long Islands to accompany lots of line dancing that
					you will be doing. If you're lucky, you can have a dance-off with local celebrity, Dancing Mike.</p>
			</section>

			<section data-scene="corvallis">
				<h2>Corvallis</h2>
				<p>Corvallis is located within the Willamette Valley of Oregon. It is home to Oregon State University. There
				are many things to do around town. It's an hour from the coast, the mountains, and larger cities. It provides land
				for many outdoor activities such as hiking, biking, and running. There are many great restaurants and bars around town.</p>
				<img src="img/cor_fl.png" class="img-responsive img-thumbnail" alt="responsive image"
				     alt-text="the flag of corvallis">
			</section>

			<section data-scene="end" data-background="assets/cheersend.jpg">
				<div class="fullscreen text-center">

					<h1 class="display-4 d-flex justify-content-center">Thanks for watching!!!</h1>

					<small class="d-flex justify-content-center" style="color: rgba(255,255,255,0.95)">I would like to thank my teacher and TA for helping me.
					</small>
				</div>
			</section>

		</div>
		<!--map div-->
		<div class="col-sm-6 col-md-8 storymap-map"></div>
	</div>

	<dl>
		<dt>
			<!--facebook icon-->
			<a class="fab fa-yelp btn"
			   href="https://www.yelp.com/search?find_desc=bars&find_loc=Corvallis%2C+OR&ns=1"
			   target="_blank"></a>
		</dt>
		<dt>
			<!--facebook icon-->
			<a class="fab fa-github btn" href="https://github.com/pruittc/lab5" style="top:40px"
			   target="_blank"></a>
		</dt>
		<dt>
			<!--info icon-->
			<i class="fas fa-info-circle btn" style="top:60px" data-toggle="modal" data-target="#info-modal"></i>
		</dt>
	</dl>

	<!--the info page-->
	<div class="modal fade" id="info-modal" role="dialog">
		<div class="modal-dialog modal-md">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title">About</h4>
				</div>
				<div class="modal-body">
					<p>This is a web map different bars within Corvallis. It is made as a lab assignment for a course GEOG 472 at Oregon State University.
						The story map library is derived from the
						storymap plugin for leaflet at <a>http://atlefren.github.io/storymap/</a>, and its functionality
						relies on both leaflet and Boostrap.</p>
					<p><b>storymap.js</b> | Released Date: 02/20/2017 | Version: 2.1 | MIT License </p>
					<p><b>Author: Colette Pruitt</b> | College of Earth, Ocean, Atmospheric Science | Oregon State University
					</p>
					<p>The context about bars within Corvallis was based on personal experience.</p>
					<p>The <a href="https://videos.pexels.com/videos/close-up-shot-of-glass-853814">background video</a> on the front page
						was clipped from Pexels videos. </p>
					<p>The <a href="https://www.flaticon.com/free-icon/beer_168557">favicon image</a> was acquired from Flat Icon.</p>
					<p>The icons used were from <a href="https://fontawesome.com/">Font Awesome</a>.</p>
					<p>This story map uses geospatial data from mapbox, Geojson, ESRI Map, Open Street Maps
						and Oregon Explorer.</p>
				</div>
			</div>
		</div>
	</div>
</div>

<!-- main javascript -->
<script type="text/javascript">


	// Create Legend Contents in html format
	var county_legend = '<i style="background: lightblue; font-size: 20px; opacity: 0.5"></i><p><b>Counties</b></p>';
	var drink_legend = '<i style="color: green; font-size: 20px; opacity: 0.5" class="fas fa-beer"></i><p><b>Clods</b></p>' +
		'<i style="color: mediumpurple; font-size: 20px; opacity: 0.5" class="fas fa-beer"></i><p><b>Sanchos</b></p>' +
		'<i style="color: orangered; font-size: 20px; opacity: 0.5" class="fas fa-beer"></i><p><b>Impulse</b></p>'+
		'<i style="color: gold; font-size: 20px; opacity: 0.5" class="fas fa-beer"></i><p><b>Harrisons</b></p>'+
        '<i style="color: dimgrey; font-size: 20px; opacity: 0.5" class="fas fa-beer"></i><p><b>Peacock</b></p>';

	// For each layer, the first variable is the layer, the second is the legend. The layer variable can be any kinds of layers that leaflet.js supports.
	// var layers = {
	//      layer1: {layer: layer1, legend: legend1},
	//      layer2: {layer: layer2, legend: legend2}
	//      ...
	// }


	var cbars = null;
	var colors = chroma.scale('Dark2').mode('lch').colors(5);
	for (i = 0; i < 5; i++) {
		$('head').append($("<style> .restaurant-type-" + (i + 1).toString() + " { color: " + colors[i] + "; font-size: 35px; text-shadow: 0 0 3px #ffffff;} </style>"));
	}
	cbars= L.geoJson.ajax("assets/map.geojson", {
		onEachFeature: function (feature, layer) {
			layer.bindPopup(feature.properties.number.toString());
		},
		pointToLayer: function (feature, latlng) {
			var id = 0;
			if (feature.properties.number == 1) {id = 0;}
			else if (feature.properties.number == 2) {id = 1;}
			else if (feature.properties.number == 3) {id = 2;}
			else if (feature.properties.number == 4) {id = 3;}
			else if (feature.properties.number == 5) {id = 4;}
			return L.marker(latlng, {icon: L.divIcon({className: 'fas fa-beer restaurant-type-' + (id + 1).toString()})})
		}
	});


	var layers = {
		ESRI: {
			layer: L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}')
		},
		counties: {
			layer: L.geoJson.ajax('assets/counties.geojson', {
				color: 'lightblue',
				weight: 2,
				opacity: 0.3
			}), legend: county_legend
		},
		GEE: {
			layer: L.geoJson.ajax('assets/corvo.geojson'),
			legend: drink_legend
		},
		satellite: {
		layer: L.geoJson.ajax('assets/pea.geojson')
	},
		cartodb_light: {layer: L.tileLayer('http://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png')},
		cbar_layer :{
			layer: cbars,
			legend: drink_legend
		}
	};

	var scenes = {
		overview: {lat: 44.5646, lng: -123.2620, zoom: 13, name: 'Cover Page', layers: []},
		clods: {lat: 44.567740, lng: -123.273040, zoom: 18, name: 'clods', layers: []},
		sanchos: {lat: 44.567582, lng: -123.272534, zoom: 18, name: 'sanchos', layers: [layers.ESRI]},
		impulse: {lat: 44.567541, lng: -123.272366, zoom: 18, name: 'impulse', layers: []},
		harrisons: {lat: 44.568000, lng: -123.262388, zoom: 18, name: 'harrisons', layers: [layers.ESRI]},
		peacock: {lat: 44.563687, lng: -123.259989, zoom: 17, name: 'peacock', layers: [ layers.satellite]},
		corvallis: {lat: 44.566762, lng: -123.270386, zoom: 12, name: 'corvallis', layers: [layers.counties, layers.cbar_layer]},
	};

    //L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png').addTo(map);
//     changed mymap to map^^



    $('#storymap').storymap({
        scenes: scenes,
        baselayer: layers.cartodb_light,
        legend: true,
        loader: true,
        flyto: true,
        scalebar: true,
        navbar: true,
        scrolldown: false,
        progressline: true,
	    mapinteraction: true,
        navwidget: true,
        createMap: function () {
            var map = L.map($(".storymap-map")[0], {zoomControl: false}).setView([44, -120], 7);
             basemap = this.baselayer.layer.addTo(map);
            return map;
        }
	});

</script>
</body>
</html>